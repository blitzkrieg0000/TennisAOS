@model SessionRelatedParameterDto

@{
Layout = "~/Views/Shared/_Layout.cshtml";
}

@* @{
if (TempData["ResponseMessage"] != null)
{

<div class="bg-primary text-white text-center lead">
	@TempData["ResponseMessage"]
</div>
}
}

<div id="infoMessage" class="bg-primary text-white text-center lead">...</div> *@

@section Links{
<link rel="stylesheet" type="text/css" href="~/assets/css/ProcessCard.css" />
<link rel="stylesheet" type="text/css" href="~/assets/css/zoom.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@fancyapps/ui@4.0/dist/fancybox.css" />
@*
<link rel="stylesheet" href="~/node_modules/@@fancyapps/ui/dist/fancybox.css" type="text/css" media="screen" /> *@
<link rel="stylesheet" href="~/assets/css/Process/this.css" />
}


<!-- Basic modal -->
<div id="modal_default" class="modal fade" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Basic modal</h5>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>

			<div class="modal-body">
			</div>

			<div class="modal-footer">
				<button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			</div>
		</div>
	</div>
</div>
<!-- /basic modal -->


<!-- AddProcess_Modal -->
<div id="modal_form_vertical" class="modal fade" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Atış Ekleme</h5>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>

			<div class="modal-body">
				
				@if((bool)Model.SessionParameterListDto.IsStreamMode){


				<form asp-action="Create" asp-controller="Process" method="post">
					<input type="hidden" value="@Model.SessionId" name="SessionId" />
					<div class="modal-body">
						<div class="form-group">
							<div class="row">
								<input name="IsStreamMode" asp-for='@Model.SessionParameterListDto.IsStreamMode' class="form-check-input" type="hidden">
							</div>
						</div>

						<div class="form-group">
							<label>Limit (İşlenecek Frame Sayısı):</label>
							<input class="input-group-text" type="number" name="Limit" value="-1">
						</div>

					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-link" data-dismiss="modal">Kapat</button>
						<div class="row">
							<button type="submit" class="btn btn-primary">Atış Ekle<i class="icon-paperplane ml-2"></i></button>
						</div>
					</div>
				</form>

				}else{


					<form asp-action="Create" asp-controller="Process" method="post">
						<input type="hidden" value="@Model.SessionId" name="SessionId" />
						<div class="modal-body">
							<div class="form-group">
								<div class="row">

									<div class="form-group">
										<label>Video/Stream Seçiniz:</label>
										@(await Component.InvokeAsync("StreamSelectListByPlayerFilter", new{playerId=Model.SessionParameterListDto.PlayerId, sessionId=Model.SessionId} ))
									</div>

									<div class="form-group">
										<label>Limit (İşlenecek Frame Sayısı):</label>
										<input class="input-group-text" type="number" name="Limit" value="-1">
									</div>

									<input name="IsStreamMode" asp-for='@Model.SessionParameterListDto.IsStreamMode' class="form-check-input" type="hidden">

								</div>
							</div>
						</div>

						<div class="modal-footer">
							<button type="button" class="btn btn-link" data-dismiss="modal">Kapat</button>
							<div class="row">
								<button type="submit" class="btn btn-primary">Atış Ekle<i class="icon-paperplane ml-2"></i></button>
							</div>
						</div>
					</form>


				}


			</div>
		</div>
	</div>
</div>
<!-- /AddProcess_Modal -->


<div>
	<!-- AddProcess_Button -->
	<td>
		<button type="button" class="btn btn-light" data-toggle="modal" data-target="#modal_form_vertical">
			Atış Ekle <i class="icon-play3 ml-2"></i>
		</button>
	</td>
	<!-- /AddProcess_Button -->

	<!--  -->
	<td>
		<a type="button" class="btn btn-danger" asp-controller="Tennis" asp-action="CalculateTotalScore" asp-route-sessionId="@Model.SessionId">
			Sonuç Hesapla <i class="icon-play3 ml-2"></i>
		</a>
	</td>
	<!-- / -->


	<!-- #SESSION PROCESSES -->
	@(await Component.InvokeAsync("ProcessListCard", new{sessionId=@Model.SessionId} ))
</div>



@section Scripts{
<!--Global-->
<script src="~/global_assets/js/demo_pages/components_modals.js"></script>
<script src="~/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/node_modules/@@microsoft/signalr/dist/browser/signalr.js"></script>

<!--Others-->
<script src="https://cdn.jsdelivr.net/npm/@@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
<!--TODO: Fancybox CDN yerine NPM kullanılacak-->
<script src="~/assets/js/Process/MasterSignalR.js"></script>
<script src="~/assets/js/Process/DetailModal.js"></script>
<script src="~/assets/js/Process/DetailCanvasEffect.js"></script>
<script src="~/assets/js/Process/Fancybox.js"></script>
}